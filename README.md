# Cut-in Killer (カットインキラー)

日本の都心部の駅ホームを舞台にしたカジュアルWebゲーム。割り込みをする行儀の悪いモブを排除し、行儀の良いモブが安全に退出できるようにサポートするゲームです。

## ゲーム概要

### シチュエーション
- 日本の都心部の駅のホームが舞台
- 定期的に列車が到着し、多数のモブが降車
- モブはエスカレーターに向かって移動
- 行儀の良いモブ（青い円）と悪いモブ（赤い四角）が存在

### ゲームプレイ
- **操作方法**: スマートフォンのタッチ、またはマウスクリックで攻撃
- **プレイ時間**: 1マップあたり2〜3分
- **目的**: 行儀の良いモブがエスカレーターから退出するのを助け、悪いモブを排除する

### スコアリング
- 行儀の良いモブ（青い円）が退出: **+5点**
- 行儀の悪いモブ（赤い四角）を攻撃で排除: **+10点**
- 行儀の良いモブを誤って攻撃: **-5点**
- 行儀の悪いモブが退出してしまった: **-10点**

### 攻撃タイプ
1. **体当たり** - 小範囲の即座攻撃（クールダウン: 0.5秒）
2. **レーザービーム** - 直線範囲攻撃（クールダウン: 1.5秒）
3. **爆撃** - 大範囲の遅延攻撃（クールダウン: 3秒、1秒の遅延あり）

### マップ
1. **新宿駅** - シンプルな1ホーム構成（2分）
2. **渋谷駅** - 混雑する2ホーム構成（2分）
3. **東京駅** - 超高速列車の3ホーム構成（3分）

## プレイ方法

### オンラインでプレイ
**GitHub Pages**: https://7474.github.io/cut-in-killer/

1. ブラウザで `index.html` を開く
2. プレイしたいマップを選択
3. 攻撃タイプを選択
4. 「スタート」ボタンをクリック
5. 画面をタッチ/クリックして攻撃

### ローカルで起動
```bash
# シンプルなHTTPサーバーで起動
python3 -m http.server 8080

# ブラウザで開く
# http://localhost:8080/index.html
```

## 技術仕様

### 使用技術
- **HTML5 Canvas** - レンダリング
- **Vanilla JavaScript** - ゲームロジック
- **Matter.js v0.20.0** - 2D物理エンジン（リアルな動きとインタラクション）
- **CSS3** - UI/UXデザイン
- **LocalStorage** - ハイスコア保存

### ファイル構成
```
cut-in-killer/
├── index.html              # メインHTML
├── styles/
│   └── main.css           # スタイルシート
├── js/
│   ├── main.js            # アプリケーションコントローラー
│   ├── game.js            # メインゲームループ
│   ├── maps.js            # マップ設定
│   ├── storage.js         # ローカルストレージ管理
│   ├── utils.js           # ユーティリティ関数
│   ├── matter.min.js      # Matter.js 物理エンジン (v0.20.0)
│   ├── PhysicsWorld.js    # Matter.jsラッパークラス
│   ├── entities/
│   │   ├── Entity.js      # 基底エンティティクラス（物理ボディ管理）
│   │   ├── NPC.js         # NPCエンティティ（物理ベースの動作）
│   │   ├── Train.js       # 列車エンティティ
│   │   ├── Platform.js    # プラットフォームエンティティ
│   │   └── Escalator.js   # エスカレーターエンティティ
│   └── attacks/
│       ├── Attack.js      # 基底攻撃クラス
│       ├── BodySlam.js    # 体当たり攻撃（物理インパルス付き）
│       ├── Laser.js       # レーザービーム攻撃（方向性の力）
│       └── Bomb.js        # 爆撃攻撃（爆発力）
└── README.md              # このファイル
```

### 特徴
- **モバイルフレンドリー** - タッチ操作に最適化
- **レスポンシブデザイン** - 様々な画面サイズに対応
- **フラットデザイン** - 抽象的でモダンなビジュアル
- **物理ベースの動作** - Matter.jsによるリアルな群衆の動きと反応
- **パフォーマンス最適化** - スムーズな60FPSゲームプレイ
- **ローカル完結** - インターネット不要、データはローカル保存

## 物理エンジン

このゲームはMatter.js v0.20.0を使用した2D物理エンジンを採用しており、よりリアルで自然なNPCの動きを実現しています。

### 物理ベースの特徴
- **自然な群衆の動き** - 逆二乗則による反発力で、NPCが適切な距離を保ちながら移動
- **質量ベースのインタラクション** - 悪いNPC（赤い四角）は1.5倍の密度を持ち、良いNPCを押し出す
- **物理ベースの攻撃** - 攻撃がNPCに力を与え、満足感のある視覚的フィードバックを生成
- **衝突検出と応答** - Matter.jsのエンジンが自動的に衝突を処理し、リアルな反応を実現
- **慣性制御** - 大きな慣性値（1e10）により回転を防ぎ、トップダウンビューに適した動作

### 物理設定
- **重力なし** - トップダウンビューのため重力はゼロに設定
- **高い空気抵抗** - 滑らかな減速と停止を実現（frictionAir: 0.3-0.4）
- **低い反発係数** - 自然な衝突応答（restitution: 0.2-0.3）

## ブラウザ対応
- Chrome / Edge (推奨)
- Firefox
- Safari
- モバイルブラウザ (iOS Safari, Chrome Mobile)

## 今後の拡張可能性
- より多くのマップバリエーション
- 新しい攻撃タイプ
- パワーアップアイテム
- サウンドエフェクトとBGM
- マルチプレイヤーモード
- オンラインリーダーボード

## ライセンス
MIT License

## スクリーンショット

### メニュー画面
![Menu Screen](https://github.com/user-attachments/assets/18d86745-b3d6-4bbd-ae72-04ce7927b14a)

### ゲームプレイ
![Gameplay](https://github.com/user-attachments/assets/f1466f97-8341-4aa8-83c5-fe2a3ae00eb1)